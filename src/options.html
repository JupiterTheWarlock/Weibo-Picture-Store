<!doctype html>
<!--
  ~ Copyright (c) 2018 The Weibo-Picture-Store Authors. All rights reserved.
  ~ Use of this source code is governed by a MIT-style license that can be
  ~ found in the LICENSE file.
  -->

<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>__MSG_options_title__</title>
        <link rel="stylesheet" href="assets/font-awesome.css" />
        <link rel="stylesheet" href="sheets/options.css" />
        <script src="scripts/env.js"></script>
    </head>
    <body>
        <div id="app">
            <h2>选项</h2>
            <div>
                <label title="扩展更新时显示此次更新的内容">
                    <input type="checkbox" value="auto_display_changelog" />
                    <span>通知我更新详情</span>
                </label>
            </div>
            <div class="weibo-watermark">
                <label title="必须同时启用微博图片水印，图片水印才会生效呦~">
                    <input type="checkbox" value="weibo_inherited_watermark" />
                    <span>继承微博图片水印</span>
                </label>
                <a
                    title="如何设置微博图片水印"
                    target="_blank"
                    href="https://www.weibo.com/ttarticle/p/show?id=2309404137032606682721"
                >
                    <i class="fa fa-info-circle"></i>
                </a>
            </div>
            <div class="http-referer">
                <label title="勾选此选项将同时开启该扩展的HTTP访问控制，可解决右键上传无法读取远程文件的问题">
                    <input type="checkbox" value="http_referer_forge" />
                    <span>伪造 HTTP Referer</span>
                </label>
                <a
                    title="HTTP访问控制(CORS)详解"
                    target="_blank"
                    href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"
                >
                    <i class="fa fa-info-circle"></i>
                </a>
            </div>
            <h2>全局URL模板</h2>
            <div>
                <label title="启用全局URL模板后，所有上传的图片都将使用此模板生成链接">
                    <input type="checkbox" value="url_template_enabled" />
                    <span>启用全局URL模板</span>
                </label>
                <fieldset id="url-template-fieldset" disabled>
                    <div class="url-template-section">
                        <p style="color: #666; margin: 10px 0">
                            输入完整的URL模板来自定义所有图片外链格式。支持以下占位符：
                        </p>
                        <div
                            style="
                                background: #f5f5f5;
                                padding: 12px;
                                border-radius: 4px;
                                margin: 10px 0;
                                font-family: monospace;
                                font-size: 12px;
                            "
                        >
                            <div><strong>基础占位符：</strong></div>
                            <div>• {{pid}} - 图片ID（如 006G4xsfgy1h8pbgtnqirj30u01hlqv5）</div>
                            <div>• {{extname}} - 文件扩展名（如 .jpg）</div>
                            <div>• {{basename}} - 完整文件名（如 006G4xsfgy1h8pbgtnqirj30u01hlqv5.jpg）</div>
                            <div style="margin-top: 8px"><strong>高级占位符：</strong></div>
                            <div>• {{scheme}} - 协议（如 https://）</div>
                            <div>• {{host}} - 域名（如 tvax1.sinaimg.cn）</div>
                            <div>• {{crop}} - 裁剪尺寸（固定为 large）</div>
                            <div>• {{path}} - 路径（如 large/006G4xsfgy1h8pbgtnqirj30u01hlqv5.jpg）</div>
                        </div>
                        <div style="background: #e6f7ff; padding: 12px; border-radius: 4px; margin: 10px 0">
                            <div><strong>📌 模板示例：</strong></div>
                            <div style="margin-top: 8px; font-family: monospace; font-size: 12px">
                                <div>• 微博原生：{{scheme}}{{host}}/{{crop}}/{{basename}}</div>
                                <div>• CDN代理：https://cdn.example.com/weibo/{{crop}}/{{basename}}</div>
                                <div>• 自定义API：https://proxy.example.com/api/image?file={{basename}}</div>
                            </div>
                        </div>
                        <div>
                            <label title="输入完整的URL模板">
                                <input
                                    spellcheck="false"
                                    type="text"
                                    placeholder="例如：https://cdn.example.com/weibo/{{crop}}/{{basename}}"
                                    id="url-template-input"
                                    style="width: 100%; padding: 8px; font-family: monospace"
                                />
                            </label>
                        </div>
                        <div style="margin-top: 10px">
                            <label>
                                <input type="button" value="保存模板" id="save-url-template" />
                            </label>
                        </div>
                        <a
                            title="查看完整文档"
                            target="_blank"
                            href="https://github.com/Semibold/Weibo-Picture-Store/blob/master/docs/url-template-system.md"
                            style="display: inline-block; margin-top: 8px; color: #1890ff"
                        >
                            <i class="fa fa-book"></i> 查看完整文档
                        </a>
                    </div>
                </fieldset>
            </div>
            <h2>微博账户</h2>
            <div>
                <label title="账号/密码不会同步到任何服务器上">
                    <input type="checkbox" value="allow_user_account" />
                    <span>使用账号和密码登录</span>
                </label>
                <fieldset disabled>
                    <div>
                        <label title="邮箱/手机号">
                            <input spellcheck="false" type="text" placeholder="邮箱/手机号" id="username" />
                        </label>
                    </div>
                    <div>
                        <label title="请输入密码">
                            <input spellcheck="false" type="password" placeholder="请输入密码" id="password" />
                        </label>
                    </div>
                    <div>
                        <label>
                            <input spellcheck="false" type="button" value="确认" id="confirm" />
                        </label>
                    </div>
                </fieldset>
            </div>
        </div>
        <script type="module" src="scripts/options.js"></script>
    </body>
</html>
